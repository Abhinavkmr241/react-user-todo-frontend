{"ast":null,"code":"import _regeneratorRuntime from \"/home/abhinav/Desktop/React/react-user-todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/abhinav/Desktop/React/react-user-todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { getToken } from \"./token-interceptor\"; // use this if API needs to send a AUTH token in header\n\nvar structureQueryParams = function structureQueryParams(params) {\n  var queryStrings = \"?\";\n  var keys = Object.keys(params);\n  keys.forEach(function (key, index) {\n    queryStrings += key + \"=\" + params[key];\n\n    if (params[keys[index + 1]]) {\n      queryStrings += \"&\";\n    }\n  });\n  return queryStrings;\n};\n\nexport var makeGetRequest = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(url) {\n    var attachToken,\n        params,\n        queryString,\n        headers,\n        authToken,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            attachToken = _args.length > 1 && _args[1] !== undefined ? _args[1] : false;\n            params = _args.length > 2 && _args[2] !== undefined ? _args[2] : null;\n            queryString = \"\";\n\n            if (params) {\n              queryString = structureQueryParams(params);\n            }\n\n            headers = {\n              Accept: \"application/json\",\n              \"Content-Type\": \"application/json\"\n            };\n\n            if (!attachToken) {\n              _context.next = 16;\n              break;\n            }\n\n            _context.prev = 6;\n            _context.next = 9;\n            return getToken();\n\n          case 9:\n            authToken = _context.sent;\n\n            if (authToken) {\n              console.log(authToken);\n              headers[\"Authorization\"] = \"Bearer \" + authToken;\n            }\n\n            _context.next = 16;\n            break;\n\n          case 13:\n            _context.prev = 13;\n            _context.t0 = _context[\"catch\"](6);\n            console.log(_context.t0);\n\n          case 16:\n            return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n              try {\n                fetch(url + queryString, {\n                  method: \"GET\",\n                  headers: headers\n                }).then(function (res) {\n                  return res.json();\n                }).then(function (jsonResponse) {\n                  if (jsonResponse.error === false) {\n                    // change this condition according to response structure\n                    resolve(jsonResponse);\n                  } else {\n                    console.log(jsonResponse);\n                    reject(jsonResponse);\n                  }\n                }).catch(function (e) {\n                  console.log(\"XHR GET Error: \", e);\n                  reject(e);\n                });\n              } catch (e) {\n                console.log(e);\n                reject();\n              }\n            }));\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[6, 13]]);\n  }));\n\n  return function makeGetRequest(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var makePostRequest = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(url) {\n    var attachToken,\n        params,\n        headers,\n        authToken,\n        _args2 = arguments;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            attachToken = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : false;\n            params = _args2.length > 2 && _args2[2] !== undefined ? _args2[2] : {};\n            headers = {\n              Accept: \"application/json\",\n              \"Content-Type\": \"application/json\"\n            };\n\n            if (!attachToken) {\n              _context2.next = 14;\n              break;\n            }\n\n            _context2.prev = 4;\n            _context2.next = 7;\n            return getToken();\n\n          case 7:\n            authToken = _context2.sent;\n\n            if (authToken) {\n              headers[\"Authorization\"] = \"Bearer \" + authToken;\n            }\n\n            _context2.next = 14;\n            break;\n\n          case 11:\n            _context2.prev = 11;\n            _context2.t0 = _context2[\"catch\"](4);\n            console.log(\"Error fetching auth token: \", _context2.t0);\n\n          case 14:\n            return _context2.abrupt(\"return\", new Promise(function (resolve, reject) {\n              try {\n                fetch(url, {\n                  method: \"POST\",\n                  headers: headers,\n                  body: JSON.stringify(params)\n                }).then(function (res) {\n                  return res.json();\n                }, function (error) {\n                  reject(error);\n                }).then(function (jsonResponse) {\n                  if (jsonResponse.error === false) {\n                    resolve(jsonResponse);\n                  } else {\n                    console.log(jsonResponse);\n                    reject(jsonResponse);\n                  }\n                }, function (error) {\n                  reject(error);\n                }).catch(function (error) {\n                  reject(error);\n                });\n              } catch (e) {\n                console.log(e);\n                reject();\n              }\n            }));\n\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[4, 11]]);\n  }));\n\n  return function makePostRequest(_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var makePutRequest = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(url) {\n    var attachToken,\n        params,\n        headers,\n        authToken,\n        _args3 = arguments;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            attachToken = _args3.length > 1 && _args3[1] !== undefined ? _args3[1] : false;\n            params = _args3.length > 2 && _args3[2] !== undefined ? _args3[2] : {};\n            headers = {\n              Accept: \"application/json\",\n              \"Content-Type\": \"application/json\"\n            };\n\n            if (!attachToken) {\n              _context3.next = 14;\n              break;\n            }\n\n            _context3.prev = 4;\n            _context3.next = 7;\n            return getToken();\n\n          case 7:\n            authToken = _context3.sent;\n\n            if (authToken) {\n              headers[\"Authorization\"] = \"Bearer \" + authToken;\n            }\n\n            _context3.next = 14;\n            break;\n\n          case 11:\n            _context3.prev = 11;\n            _context3.t0 = _context3[\"catch\"](4);\n            console.log(\"Error fetching auth token: \", _context3.t0);\n\n          case 14:\n            return _context3.abrupt(\"return\", new Promise(function (resolve, reject) {\n              try {\n                fetch(url, {\n                  method: \"PUT\",\n                  headers: headers,\n                  body: JSON.stringify(params)\n                }).then(function (res) {\n                  return res.json();\n                }, function (error) {\n                  reject(error);\n                }).then(function (jsonResponse) {\n                  if (jsonResponse.error === false) {\n                    resolve(jsonResponse);\n                  } else {\n                    console.log(jsonResponse);\n                    reject(jsonResponse);\n                  }\n                }, function (error) {\n                  reject(error);\n                }).catch(function (error) {\n                  reject(error);\n                });\n              } catch (e) {\n                console.log(e);\n                reject();\n              }\n            }));\n\n          case 15:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[4, 11]]);\n  }));\n\n  return function makePutRequest(_x3) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport var makeDeleteRequest = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(url) {\n    var attachToken,\n        params,\n        headers,\n        authToken,\n        _args4 = arguments;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            attachToken = _args4.length > 1 && _args4[1] !== undefined ? _args4[1] : false;\n            params = _args4.length > 2 && _args4[2] !== undefined ? _args4[2] : {};\n            headers = {\n              Accept: \"application/json\",\n              \"Content-Type\": \"application/json\"\n            };\n\n            if (!attachToken) {\n              _context4.next = 14;\n              break;\n            }\n\n            _context4.prev = 4;\n            _context4.next = 7;\n            return getToken();\n\n          case 7:\n            authToken = _context4.sent;\n\n            if (authToken) {\n              headers[\"Authorization\"] = \"Bearer \" + authToken;\n            }\n\n            _context4.next = 14;\n            break;\n\n          case 11:\n            _context4.prev = 11;\n            _context4.t0 = _context4[\"catch\"](4);\n            console.log(\"Error fetching auth token: \", _context4.t0);\n\n          case 14:\n            return _context4.abrupt(\"return\", new Promise(function (resolve, reject) {\n              try {\n                fetch(url, {\n                  method: \"DELETE\",\n                  headers: headers,\n                  body: JSON.stringify(params)\n                }).then(function (res) {\n                  return res.json();\n                }, function (error) {\n                  reject(error);\n                }).then(function (jsonResponse) {\n                  if (jsonResponse.error === false) {\n                    resolve(jsonResponse);\n                  } else {\n                    console.log(jsonResponse);\n                    reject(jsonResponse);\n                  }\n                }, function (error) {\n                  reject(error);\n                }).catch(function (error) {\n                  reject(error);\n                });\n              } catch (e) {\n                console.log(e);\n                reject();\n              }\n            }));\n\n          case 15:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, null, [[4, 11]]);\n  }));\n\n  return function makeDeleteRequest(_x4) {\n    return _ref4.apply(this, arguments);\n  };\n}();","map":{"version":3,"sources":["/home/abhinav/Desktop/React/react-user-todo/src/http/http-service.js"],"names":["getToken","structureQueryParams","params","queryStrings","keys","Object","forEach","key","index","makeGetRequest","url","attachToken","queryString","headers","Accept","authToken","console","log","Promise","resolve","reject","fetch","method","then","res","json","jsonResponse","error","catch","e","makePostRequest","body","JSON","stringify","makePutRequest","makeDeleteRequest"],"mappings":"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","sourcesContent":["import { getToken } from \"./token-interceptor\"; // use this if API needs to send a AUTH token in header\n\nconst structureQueryParams = params => {\n  let queryStrings = \"?\";\n  const keys = Object.keys(params);\n  keys.forEach((key, index) => {\n    queryStrings += key + \"=\" + params[key];\n    if (params[keys[index + 1]]) {\n      queryStrings += \"&\";\n    }\n  });\n  return queryStrings;\n};\nexport const makeGetRequest = async (\n  url,\n  attachToken = false,\n  params = null\n) => {\n  let queryString = \"\";\n  if (params) {\n    queryString = structureQueryParams(params);\n  }\n  let headers = {\n    Accept: \"application/json\",\n    \"Content-Type\": \"application/json\"\n  };\n  if (attachToken) {\n    try {\n      const authToken = await getToken();\n      if (authToken) {\n        console.log(authToken);\n        headers[\"Authorization\"] = \"Bearer \" + authToken;\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n  return new Promise((resolve, reject) => {\n    try {\n      fetch(url + queryString, {\n        method: \"GET\",\n        headers: headers\n      })\n        .then(res => res.json())\n        .then(jsonResponse => {\n          if (jsonResponse.error === false) { // change this condition according to response structure\n            resolve(jsonResponse);\n          } else {\n            console.log(jsonResponse);\n            reject(jsonResponse);\n          }\n        })\n        .catch(e => {\n          console.log(\"XHR GET Error: \", e);\n          reject(e);\n        });\n    } catch (e) {\n      console.log(e);\n      reject();\n    }\n  });\n};\nexport const makePostRequest = async (\n  url,\n  attachToken = false,\n  params = {}\n) => {\n  let headers = {\n    Accept: \"application/json\",\n    \"Content-Type\": \"application/json\"\n  };\n  if (attachToken) {\n    try {\n      const authToken = await getToken();\n      if (authToken) {\n        headers[\"Authorization\"] = \"Bearer \" + authToken;\n      }\n    } catch (e) {\n      console.log(\"Error fetching auth token: \", e);\n    }\n  }\n  return new Promise((resolve, reject) => {\n    try {\n      fetch(url, {\n        method: \"POST\",\n        headers: headers,\n        body: JSON.stringify(params)\n      })\n        .then(\n          res => res.json(),\n          error => {\n            reject(error);\n          }\n        )\n        .then(\n          jsonResponse => {\n            if (jsonResponse.error === false) {\n              resolve(jsonResponse);\n            } else {\n              console.log(jsonResponse);\n              reject(jsonResponse);\n            }\n          },\n          error => {\n            reject(error);\n          }\n        )\n        .catch(error => {\n          reject(error);\n        });\n    } catch (e) {\n      console.log(e);\n      reject();\n    }\n  });\n};\nexport const makePutRequest = async (\n  url,\n  attachToken = false,\n  params = {}\n) => {\n  let headers = {\n    Accept: \"application/json\",\n    \"Content-Type\": \"application/json\"\n  };\n  if (attachToken) {\n    try {\n      const authToken = await getToken();\n      if (authToken) {\n        headers[\"Authorization\"] = \"Bearer \" + authToken;\n      }\n    } catch (e) {\n      console.log(\"Error fetching auth token: \", e);\n    }\n  }\n  return new Promise((resolve, reject) => {\n    try {\n      fetch(url, {\n        method: \"PUT\",\n        headers: headers,\n        body: JSON.stringify(params)\n      })\n        .then(\n          res => res.json(),\n          error => {\n            reject(error);\n          }\n        )\n        .then(\n          jsonResponse => {\n            if (jsonResponse.error === false) {\n              resolve(jsonResponse);\n            } else {\n              console.log(jsonResponse);\n              reject(jsonResponse);\n            }\n          },\n          error => {\n            reject(error);\n          }\n        )\n        .catch(error => {\n          reject(error);\n        });\n    } catch (e) {\n      console.log(e);\n      reject();\n    }\n  });\n};\nexport const makeDeleteRequest = async (\n  url,\n  attachToken = false,\n  params = {}\n) => {\n  let headers = {\n    Accept: \"application/json\",\n    \"Content-Type\": \"application/json\"\n  };\n  if (attachToken) {\n    try {\n      const authToken = await getToken();\n      if (authToken) {\n        headers[\"Authorization\"] = \"Bearer \" + authToken;\n      }\n    } catch (e) {\n      console.log(\"Error fetching auth token: \", e);\n    }\n  }\n  return new Promise((resolve, reject) => {\n    try {\n      fetch(url, {\n        method: \"DELETE\",\n        headers: headers,\n        body: JSON.stringify(params)\n      })\n        .then(\n          res => res.json(),\n          error => {\n            reject(error);\n          }\n        )\n        .then(\n          jsonResponse => {\n            if (jsonResponse.error === false) {\n              resolve(jsonResponse);\n            } else {\n              console.log(jsonResponse);\n              reject(jsonResponse);\n            }\n          },\n          error => {\n            reject(error);\n          }\n        )\n        .catch(error => {\n          reject(error);\n        });\n    } catch (e) {\n      console.log(e);\n      reject();\n    }\n  });\n};\n\n"]},"metadata":{},"sourceType":"module"}